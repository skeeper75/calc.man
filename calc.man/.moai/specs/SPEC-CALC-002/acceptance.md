---
id: SPEC-CALC-002
version: "1.0.0"
status: approved
created: "2026-02-09"
updated: "2026-02-09"
phase: acceptance
---

# SPEC-CALC-002: 인수 기준 (Acceptance Criteria)

## 개요

이 문서는 SPEC-CALC-002 구현의 인수 기준을 정의합니다. Given-When-Then 형식을 사용하여 각 시나리오를 명확히 서술하며, 모든 시나리오가 통과해야 구현 완료로 간주됩니다.

## 인수 테스트 시나리오

### AC-1: 숫자 버튼 입력 및 디스플레이 표시

**요구사항**: [REQ-UI-001], [REQ-UI-004]

**시나리오 1.1**: 단일 숫자 버튼 클릭

```gherkin
Given 계산기가 초기 상태("0" 표시)일 때
When 사용자가 숫자 "5" 버튼을 클릭하면
Then 디스플레이에 "5"가 표시되어야 한다
And 디스플레이 값이 즉시 업데이트되어야 한다 (< 16ms)
```

**시나리오 1.2**: 연속 숫자 버튼 클릭

```gherkin
Given 계산기가 초기 상태일 때
When 사용자가 "1", "2", "3" 버튼을 순서대로 클릭하면
Then 디스플레이에 "123"이 표시되어야 한다
And 각 클릭 후 디스플레이가 즉시 업데이트되어야 한다
```

**시나리오 1.3**: 소수점 입력

```gherkin
Given 디스플레이에 "3"이 표시되어 있을 때
When 사용자가 "." 버튼을 클릭하면
Then 디스플레이에 "3."이 표시되어야 한다
And 사용자가 "14" 버튼을 순서대로 클릭하면
Then 디스플레이에 "3.14"가 표시되어야 한다
```

**검증 방법**:
- 단위 테스트: KeypadButton 클릭 이벤트 핸들러 검증
- 통합 테스트: Calculator 컴포넌트의 숫자 입력 흐름 검증
- E2E 테스트: Playwright로 실제 UI 인터랙션 테스트

---

### AC-2: 산술 연산 수행

**요구사항**: [REQ-UI-004], [REQ-UI-007]

**시나리오 2.1**: 덧셈 연산

```gherkin
Given 계산기가 초기 상태일 때
When 사용자가 "5" 버튼을 클릭하고
And "+" 버튼을 클릭하면
Then "+" 버튼에 시각적 피드백이 표시되어야 한다 (active 상태)
And 사용자가 "3" 버튼을 클릭하고
And "=" 버튼을 클릭하면
Then 디스플레이에 "8"이 표시되어야 한다
```

**시나리오 2.2**: 곱셈 연산

```gherkin
Given 계산기가 초기 상태일 때
When 사용자가 "7" 버튼을 클릭하고
And "*" 버튼을 클릭하고
And "6" 버튼을 클릭하고
And "=" 버튼을 클릭하면
Then 디스플레이에 "42"가 표시되어야 한다
```

**시나리오 2.3**: 나눗셈 연산 (오류 처리)

```gherkin
Given 계산기가 초기 상태일 때
When 사용자가 "5" 버튼을 클릭하고
And "/" 버튼을 클릭하고
And "0" 버튼을 클릭하고
And "=" 버튼을 클릭하면
Then 디스플레이에 "Error"가 표시되어야 한다
And 오류 메시지는 빨간색으로 표시되어야 한다
```

**시나리오 2.4**: 연속 연산

```gherkin
Given 디스플레이에 "10"이 표시되어 있을 때
When 사용자가 "+" 버튼을 클릭하고
And "5" 버튼을 클릭하고
And "=" 버튼을 클릭하면
Then 디스플레이에 "15"가 표시되고
When 사용자가 "*" 버튼을 클릭하고
And "2" 버튼을 클릭하고
And "=" 버튼을 클릭하면
Then 디스플레이에 "30"이 표시되어야 한다
```

**검증 방법**:
- 단위 테스트: useCalculator 훅의 연산자 처리 로직 검증
- 통합 테스트: Calculator 컴포넌트의 전체 연산 흐름 검증
- E2E 테스트: 실제 사용자 시나리오 재현

---

### AC-3: AC(All Clear) 버튼 동작

**요구사항**: [REQ-UI-005]

**시나리오 3.1**: 초기 상태에서 AC 클릭

```gherkin
Given 계산기가 초기 상태("0" 표시)일 때
When 사용자가 "AC" 버튼을 클릭하면
Then 디스플레이에 "0"이 표시되어야 한다
And 내부 상태가 초기화되어야 한다
```

**시나리오 3.2**: 계산 중 AC 클릭

```gherkin
Given 사용자가 "5", "+", "3"을 입력한 상태일 때
When 사용자가 "AC" 버튼을 클릭하면
Then 디스플레이에 "0"이 표시되어야 한다
And 모든 연산 상태가 초기화되어야 한다
And 사용자가 새로운 계산을 시작할 수 있어야 한다
```

**시나리오 3.3**: 오류 상태에서 AC 클릭

```gherkin
Given 디스플레이에 "Error"가 표시되어 있을 때
When 사용자가 "AC" 버튼을 클릭하면
Then 디스플레이에 "0"이 표시되어야 한다
And 오류 상태가 클리어되어야 한다
```

**검증 방법**:
- 단위 테스트: useCalculator의 handleAllClear 함수 검증
- 통합 테스트: AC 버튼 클릭 후 상태 초기화 확인
- E2E 테스트: 다양한 상태에서 AC 버튼 동작 검증

---

### AC-4: C(Clear) 버튼 동작

**요구사항**: [REQ-UI-006]

**시나리오 4.1**: 단일 문자 삭제

```gherkin
Given 디스플레이에 "123"이 표시되어 있을 때
When 사용자가 "C" 버튼을 클릭하면
Then 디스플레이에 "12"가 표시되어야 한다
```

**시나리오 4.2**: 모든 문자 삭제

```gherkin
Given 디스플레이에 "5"가 표시되어 있을 때
When 사용자가 "C" 버튼을 클릭하면
Then 디스플레이에 "0"이 표시되어야 한다
```

**시나리오 4.3**: 빈 상태에서 C 클릭

```gherkin
Given 디스플레이에 "0"이 표시되어 있을 때
When 사용자가 "C" 버튼을 클릭하면
Then 디스플레이에 "0"이 유지되어야 한다
And 오류가 발생하지 않아야 한다
```

**시나리오 4.4**: 소수점 포함 삭제

```gherkin
Given 디스플레이에 "3.14"가 표시되어 있을 때
When 사용자가 "C" 버튼을 2번 클릭하면
Then 디스플레이에 "3."이 표시되고
When 사용자가 "C" 버튼을 1번 더 클릭하면
Then 디스플레이에 "3"이 표시되어야 한다
```

**검증 방법**:
- 단위 테스트: useCalculator의 handleClear 함수 검증
- 통합 테스트: C 버튼 클릭 후 마지막 문자 삭제 확인
- E2E 테스트: 연속 C 버튼 클릭 시나리오 검증

---

### AC-5: 반응형 모바일 레이아웃

**요구사항**: [REQ-UI-010]

**시나리오 5.1**: 모바일 화면 크기 (< 768px)

```gherkin
Given 브라우저 화면 너비가 375px(iPhone SE)일 때
When 페이지를 로드하면
Then 계산기가 화면에 맞게 표시되어야 한다
And 버튼 크기는 60px x 60px이어야 한다
And 디스플레이 높이는 80px이어야 한다
And 컨테이너 패딩은 16px이어야 한다
And 모든 버튼이 터치 가능해야 한다
```

**시나리오 5.2**: 태블릿 화면 크기 (768px - 1024px)

```gherkin
Given 브라우저 화면 너비가 768px(iPad)일 때
When 페이지를 로드하면
Then 계산기가 화면 중앙에 표시되어야 한다
And 버튼 크기는 80px x 80px이어야 한다
And 디스플레이 높이는 100px이어야 한다
And 최대 너비(max-width)는 28rem이어야 한다
```

**시나리오 5.3**: 데스크톱 화면 크기 (>= 1024px)

```gherkin
Given 브라우저 화면 너비가 1920px(Full HD)일 때
When 페이지를 로드하면
Then 계산기가 화면 중앙에 표시되어야 한다
And 버튼 크기는 80px x 80px이어야 한다
And 최대 너비(max-width)는 28rem이어야 한다
And 좌우 여백이 충분히 확보되어야 한다
```

**시나리오 5.4**: 화면 회전 (Portrait ↔ Landscape)

```gherkin
Given 모바일 기기를 세로 모드로 사용 중일 때
When 사용자가 기기를 가로 모드로 회전하면
Then 레이아웃이 즉시 재조정되어야 한다
And 모든 버튼이 여전히 표시되어야 한다
And UI가 깨지지 않아야 한다
```

**검증 방법**:
- 단위 테스트: Layout 컴포넌트의 반응형 클래스 검증
- E2E 테스트: Playwright의 viewportSize로 다양한 화면 크기 테스트
- 수동 테스트: 실제 모바일 기기(iPhone, Android)에서 확인

---

### AC-6: 디스플레이 글꼴 크기 자동 조정

**요구사항**: [REQ-UI-003], [REQ-UI-008]

**시나리오 6.1**: 15자 이하 입력

```gherkin
Given 계산기가 초기 상태일 때
When 사용자가 "12345678901234"를 입력하면 (14자)
Then 디스플레이에 "12345678901234"가 표시되고
And 글꼴 크기는 "text-4xl"(36px)이어야 한다
```

**시나리오 6.2**: 16-20자 입력

```gherkin
Given 계산기가 초기 상태일 때
When 사용자가 "123456789012345678"를 입력하면 (18자)
Then 디스플레이에 "123456789012345678"이 표시되고
And 글꼴 크기는 "text-3xl"(30px)로 줄어들어야 한다
And 모든 숫자가 잘림 없이 표시되어야 한다
```

**시나리오 6.3**: 21자 이상 입력

```gherkin
Given 계산기가 초기 상태일 때
When 사용자가 "123456789012345678901"을 입력하면 (21자)
Then 디스플레이에 "123456789012345678901"이 표시되고
And 글꼴 크기는 "text-2xl"(24px)로 줄어들어야 한다
And 모든 숫자가 잘림 없이 표시되어야 한다
And 가로 스크롤이 발생하지 않아야 한다
```

**시나리오 6.4**: 계산 결과가 긴 경우

```gherkin
Given 사용자가 "999999" * "999999" 연산을 수행했을 때
When "=" 버튼을 클릭하면
Then 결과 "999998000001"이 표시되고 (12자)
And 글꼴 크기는 "text-4xl"(36px)이어야 한다
```

**검증 방법**:
- 단위 테스트: Display 컴포넌트의 getFontSize 함수 검증
- 통합 테스트: 다양한 길이의 입력값에 대한 글꼴 크기 확인
- 시각적 회귀 테스트: Percy 또는 Chromatic으로 스크린샷 비교

---

### AC-7: 접근성 및 키보드 탐색

**요구사항**: [REQ-UI-002]

**시나리오 7.1**: Tab 키로 버튼 포커스 이동

```gherkin
Given 페이지가 로드되어 있을 때
When 사용자가 Tab 키를 누르면
Then 첫 번째 버튼(AC)에 포커스가 이동해야 하고
And 포커스 인디케이터가 명확히 표시되어야 한다
When 사용자가 Tab 키를 계속 누르면
Then 포커스가 논리적 순서(왼쪽→오른쪽, 위→아래)로 이동해야 한다
```

**시나리오 7.2**: Enter/Space 키로 버튼 활성화

```gherkin
Given "5" 버튼에 포커스가 있을 때
When 사용자가 Enter 키를 누르면
Then 디스플레이에 "5"가 표시되어야 한다
And 클릭한 것과 동일한 동작이 수행되어야 한다
```

**시나리오 7.3**: Escape 키로 AC 기능 실행

```gherkin
Given 사용자가 "5 + 3"을 입력한 상태일 때
When 사용자가 Escape 키를 누르면
Then 디스플레이에 "0"이 표시되어야 한다
And AC 버튼을 클릭한 것과 동일한 효과가 발생해야 한다
```

**시나리오 7.4**: 스크린 리더 지원

```gherkin
Given 스크린 리더(NVDA/JAWS)가 활성화되어 있을 때
When 사용자가 "5" 버튼에 포커스를 이동하면
Then 스크린 리더가 "5, button"을 읽어야 한다
And 모든 버튼에 적절한 aria-label이 제공되어야 한다
```

**시나리오 7.5**: 디스플레이 값 변경 알림

```gherkin
Given 스크린 리더가 활성화되어 있을 때
When 사용자가 "5" 버튼을 클릭하면
Then 디스플레이에 "5"가 표시되고
And 스크린 리더가 "5"를 읽어야 한다 (aria-live="polite")
```

**시나리오 7.6**: 색상 대비비 검증

```gherkin
Given 계산기 UI가 표시되어 있을 때
When axe-core 접근성 검사를 실행하면
Then 모든 텍스트/배경 대비비가 4.5:1 이상이어야 한다
And 버튼의 포커스 인디케이터가 명확히 구분되어야 한다
And 접근성 위반이 0건이어야 한다
```

**검증 방법**:
- 단위 테스트: KeypadButton의 aria-label 속성 검증
- E2E 테스트: Playwright로 키보드 탐색 시나리오 자동화
- 접근성 검사: axe-core, Lighthouse Accessibility Score
- 수동 테스트: 실제 스크린 리더(NVDA, JAWS, VoiceOver)로 검증

---

## 추가 검증 시나리오

### AC-8: 성능 요구사항

**시나리오 8.1**: 버튼 클릭 응답 시간

```gherkin
Given 계산기가 로드되어 있을 때
When 사용자가 임의의 버튼을 클릭하면
Then 디스플레이 업데이트가 16ms 이내에 완료되어야 한다 (60fps)
And 사용자가 지연을 느끼지 않아야 한다
```

**시나리오 8.2**: 초기 렌더링 성능

```gherkin
Given 브라우저에서 페이지를 로드할 때
When 계산기 컴포넌트가 마운트되면
Then 초기 렌더링이 100ms 이내에 완료되어야 한다
And Lighthouse Performance Score가 90 이상이어야 한다
```

**검증 방법**:
- React DevTools Profiler로 렌더링 시간 측정
- Lighthouse로 성능 점수 확인
- Web Vitals (LCP, FID, CLS) 모니터링

---

### AC-9: 오류 처리

**시나리오 9.1**: 0으로 나누기

```gherkin
Given 사용자가 "10 / 0"을 입력했을 때
When "=" 버튼을 클릭하면
Then 디스플레이에 "Error"가 표시되어야 한다
And 오류 메시지는 빨간색으로 표시되어야 한다
And 사용자가 AC 또는 C 버튼을 눌러 복구할 수 있어야 한다
```

**시나리오 9.2**: 잘못된 연산자 입력

```gherkin
Given 디스플레이에 "5"가 표시되어 있을 때
When 사용자가 "+" 버튼을 연속으로 2번 클릭하면
Then 마지막 연산자만 적용되어야 한다
And 오류가 발생하지 않아야 한다
```

**검증 방법**:
- 단위 테스트: useCalculator의 오류 처리 로직 검증
- 통합 테스트: 다양한 오류 시나리오 검증
- E2E 테스트: 사용자 오류 복구 플로우 검증

---

## Definition of Done (완료 기준)

### 기능 완료
- [ ] 모든 인수 테스트 시나리오(AC-1 ~ AC-9)가 통과함
- [ ] 단위 테스트 커버리지 85% 이상
- [ ] 통합 테스트 모든 주요 워크플로우 커버
- [ ] E2E 테스트 모든 사용자 시나리오 검증

### 품질 기준
- [ ] ESLint 및 Prettier 검사 통과 (경고 0건)
- [ ] TypeScript 타입 오류 0건
- [ ] axe-core 접근성 위반 0건
- [ ] Lighthouse Accessibility Score 95 이상

### 성능 기준
- [ ] 버튼 클릭 응답 시간 < 16ms
- [ ] 초기 렌더링 시간 < 100ms
- [ ] Calculator 번들 크기 < 50KB (gzipped)
- [ ] Lighthouse Performance Score 90 이상

### 반응형 디자인
- [ ] 모바일(< 768px) 레이아웃 검증 완료
- [ ] 태블릿(768px - 1024px) 레이아웃 검증 완료
- [ ] 데스크톱(>= 1024px) 레이아웃 검증 완료
- [ ] 실제 기기(iPhone, Android) 테스트 완료

### 접근성
- [ ] 키보드만으로 모든 기능 사용 가능
- [ ] 스크린 리더(NVDA, JAWS, VoiceOver)로 모든 버튼 읽기 가능
- [ ] 색상 대비비 WCAG AA 기준(4.5:1) 충족
- [ ] ARIA 레이블 모든 버튼에 제공

### 문서화
- [ ] 컴포넌트 Props 타입 문서화
- [ ] 주요 함수에 JSDoc 주석 추가
- [ ] README에 사용 방법 추가
- [ ] SPEC-CALC-002 완료 보고서 작성

### 코드 리뷰
- [ ] PR 생성 및 팀 리뷰 완료
- [ ] 리뷰 피드백 반영 완료
- [ ] 최소 1명 이상의 승인

---

## 테스트 실행 명령어

### 단위 및 통합 테스트
```bash
# 모든 테스트 실행
npm run test

# 커버리지 리포트 생성
npm run test:coverage

# 특정 파일 테스트
npm run test Calculator.test.tsx
```

### E2E 테스트
```bash
# Playwright 테스트 실행
npm run test:e2e

# 특정 브라우저에서 실행
npm run test:e2e -- --project=chromium

# UI 모드로 실행
npm run test:e2e -- --ui
```

### 접근성 검사
```bash
# axe-core 검사
npm run test:a11y

# Lighthouse 검사
npm run lighthouse
```

---

**[SPEC-CALC-002]** 인수 기준 문서

모든 시나리오가 통과해야 구현 완료로 간주됩니다.

🗿 MoAI <email@mo.ai.kr>
